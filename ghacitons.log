Run npm run test:ci
> btc-tracker@0.6.0 test:ci
> jest --ci --coverage --watchAll=false
PASS src/tests/api/custom-currencies.test.ts
  â— Console
    console.log
      ğŸ§ª Jest test environment configured
      at Object.<anonymous> (src/tests/jest.env.js:21:9)
    console.log
      [DATA] Database URL: file:./test.db
      at Object.<anonymous> (src/tests/jest.env.js:22:9)
    console.log
      [LOCK] NextAuth URL: http://localhost:3000
      at Object.<anonymous> (src/tests/jest.env.js:23:9)
    console.log
      [TEST] Test database connected
      at src/tests/setup.ts:35:11
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      [TOOL] Initializing test database...
      at log (src/tests/test-db.ts:44:13)
    console.log
      [OK] Test database initialized
      at log (src/tests/test-db.ts:193:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TEST] Test database disconnected
      at src/tests/setup.ts:42:13
PASS src/tests/api/settings.test.ts
  â— Console
    console.log
      ğŸ§ª Jest test environment configured
      at Object.<anonymous> (src/tests/jest.env.js:21:9)
    console.log
      [DATA] Database URL: file:./test.db
      at Object.<anonymous> (src/tests/jest.env.js:22:9)
    console.log
      [LOCK] NextAuth URL: http://localhost:3000
      at Object.<anonymous> (src/tests/jest.env.js:23:9)
    console.log
      [TEST] Test database connected
      at src/tests/setup.ts:35:11
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      [TOOL] Initializing test database...
      at log (src/tests/test-db.ts:44:13)
    console.log
      [OK] Test database initialized
      at log (src/tests/test-db.ts:193:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      Creating default settings...
      at Function.log (src/lib/settings-service.ts:164:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.error
      Error updating settings: Error: Invalid main currency: INVALID_XYZ. Main currency must be one of: USD, EUR, PLN, GBP, CAD, AUD, JPY, CHF, SEK, NOK
          at Function.SettingsService.validateCurrencySettings (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:14:13)
          at Function.validateCurrencySettings (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:204:10)
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:6424:19)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:6190:14)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:6122:39
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:6071:10)
          at Function.SettingsService.updateCurrencySettings (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:7061:12)
          at updateCurrencySettings (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:68:51)
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:4845:19)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:4611:14)
          at fulfilled (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:4506:24)
      102 |
      103 |   } catch (error) {
    > 104 |     console.error('Error updating settings:', error);
          |             ^
      105 |     
      106 |     // Handle validation errors specifically
      107 |     if (error instanceof Error && error.message.includes('Invalid main currency')) {
      at error (src/app/api/settings/route.ts:104:13)
      at step (src/app/api/settings/route.ts:4845:19)
      at Object.throw (src/app/api/settings/route.ts:4611:14)
      at rejected (src/app/api/settings/route.ts:4520:32)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.error
      Error updating settings: Error: Invalid main currency: INVALID_ABC. Main currency must be one of: USD, EUR, PLN, GBP, CAD, AUD, JPY, CHF, SEK, NOK
          at Function.SettingsService.validateCurrencySettings (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:14:13)
          at Function.validateCurrencySettings [as validateSettings] (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:23:12)
          at Function.validateSettings (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:105:12)
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:6424:19)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:6190:14)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:6122:39
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:6071:10)
          at Function.SettingsService.updateSettings (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:6721:12)
          at updateSettings (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:139:51)
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:4845:19)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:4611:14)
          at fulfilled (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:4506:24)
      143 |       return savedSettings;
      144 |     } catch (error) {
    > 145 |       console.error('Error updating settings:', error);
          |               ^
      146 |       throw error;
      147 |     }
      148 |   }
      at Function.error (src/lib/settings-service.ts:145:15)
      at step (src/lib/settings-service.ts:6424:19)
      at Object.next (src/lib/settings-service.ts:6190:14)
      at src/lib/settings-service.ts:6122:39
      at Object.<anonymous>.__awaiter (src/lib/settings-service.ts:6071:10)
      at Function.SettingsService.updateSettings (src/lib/settings-service.ts:6721:12)
      at updateSettings (src/app/api/settings/route.ts:139:51)
      at step (src/app/api/settings/route.ts:4845:19)
      at Object.next (src/app/api/settings/route.ts:4611:14)
      at fulfilled (src/app/api/settings/route.ts:4506:24)
    console.error
      Error replacing settings: Error: Invalid main currency: INVALID_ABC. Main currency must be one of: USD, EUR, PLN, GBP, CAD, AUD, JPY, CHF, SEK, NOK
          at Function.SettingsService.validateCurrencySettings (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:14:13)
          at Function.validateCurrencySettings [as validateSettings] (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:23:12)
          at Function.validateSettings (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:105:12)
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:6424:19)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:6190:14)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:6122:39
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:6071:10)
          at Function.SettingsService.updateSettings (/home/runner/work/BTC-Tracker/BTC-Tracker/src/lib/settings-service.ts:6721:12)
          at updateSettings (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:139:51)
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:4845:19)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:4611:14)
          at fulfilled (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:4506:24)
      152 |
      153 |   } catch (error) {
    > 154 |     console.error('Error replacing settings:', error);
          |             ^
      155 |     
      156 |     // Handle validation errors specifically
      157 |     if (error instanceof Error && error.message.includes('Invalid main currency')) {
      at error (src/app/api/settings/route.ts:154:13)
      at step (src/app/api/settings/route.ts:4845:19)
      at Object.throw (src/app/api/settings/route.ts:4611:14)
      at rejected (src/app/api/settings/route.ts:4520:32)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.error
      Error updating settings: Error: Invalid JSON
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:519:35
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:37:23)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:18:53)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:12:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:8:12)
          at Object.json (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:519:15)
          at json (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:57:32)
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:4845:19)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:4611:14)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:4543:40
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:4492:10)
          at PATCH (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:5051:10)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:522:43
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:37:23)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:18:53)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:12:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:8:12)
          at Object.<anonymous> (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:516:57)
          at Promise.then.completed (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/testWorker.js:106:12)
      102 |
      103 |   } catch (error) {
    > 104 |     console.error('Error updating settings:', error);
          |             ^
      105 |     
      106 |     // Handle validation errors specifically
      107 |     if (error instanceof Error && error.message.includes('Invalid main currency')) {
      at error (src/app/api/settings/route.ts:104:13)
      at step (src/app/api/settings/route.ts:4845:19)
      at Object.throw (src/app/api/settings/route.ts:4611:14)
      at rejected (src/app/api/settings/route.ts:4520:32)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.error
      Error replacing settings: Error: Invalid JSON
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:533:35
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:37:23)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:18:53)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:12:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:8:12)
          at Object.json (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:533:15)
          at json (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:128:32)
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:4845:19)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:4611:14)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:4543:40
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:4492:10)
          at PUT (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/settings/route.ts:5286:10)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:536:41
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:37:23)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:18:53)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:12:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:8:12)
          at Object.<anonymous> (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/settings.test.ts:530:55)
          at Promise.then.completed (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/testWorker.js:106:12)
      152 |
      153 |   } catch (error) {
    > 154 |     console.error('Error replacing settings:', error);
          |             ^
      155 |     
      156 |     // Handle validation errors specifically
      157 |     if (error instanceof Error && error.message.includes('Invalid main currency')) {
      at error (src/app/api/settings/route.ts:154:13)
      at step (src/app/api/settings/route.ts:4845:19)
      at Object.throw (src/app/api/settings/route.ts:4611:14)
      at rejected (src/app/api/settings/route.ts:4520:32)
    console.log
      [TEST] Test database disconnected
      at src/tests/setup.ts:42:13
PASS src/tests/api/historical-data.test.ts (5.054 s)
  â— Console
    console.log
      ğŸ§ª Jest test environment configured
      at Object.<anonymous> (src/tests/jest.env.js:21:9)
    console.log
      [DATA] Database URL: file:./test.db
      at Object.<anonymous> (src/tests/jest.env.js:22:9)
    console.log
      [LOCK] NextAuth URL: http://localhost:3000
      at Object.<anonymous> (src/tests/jest.env.js:23:9)
    console.log
      [TEST] Test database connected
      at src/tests/setup.ts:35:11
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      [TOOL] Initializing test database...
      at log (src/tests/test-db.ts:44:13)
    console.log
      [OK] Test database initialized
      at log (src/tests/test-db.ts:193:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TEST] Test database disconnected
      at src/tests/setup.ts:42:13
PASS src/tests/api/bitcoin-price.test.ts
  â— Console
    console.log
      ğŸ§ª Jest test environment configured
      at Object.<anonymous> (src/tests/jest.env.js:21:9)
    console.log
      [DATA] Database URL: file:./test.db
      at Object.<anonymous> (src/tests/jest.env.js:22:9)
    console.log
      [LOCK] NextAuth URL: http://localhost:3000
      at Object.<anonymous> (src/tests/jest.env.js:23:9)
    console.log
      [TEST] Test database connected
      at src/tests/setup.ts:35:11
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      [TOOL] Initializing test database...
      at log (src/tests/test-db.ts:44:13)
    console.log
      [OK] Test database initialized
      at log (src/tests/test-db.ts:193:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.error
      Error fetching Bitcoin price: Error: Service unavailable
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:157:65
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:37:23)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:18:53)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:12:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:8:12)
          at Object.<anonymous> (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:156:57)
          at Promise.then.completed (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/testWorker.js:106:12)
      28 |     });
      29 |   } catch (error) {
    > 30 |     console.error('Error fetching Bitcoin price:', error);
         |             ^
      31 |     
      32 |     return NextResponse.json({
      33 |       success: false,
      at error (src/app/api/bitcoin-price/route.ts:30:13)
      at step (src/app/api/bitcoin-price/route.ts:3562:19)
      at Object.throw (src/app/api/bitcoin-price/route.ts:3328:14)
      at rejected (src/app/api/bitcoin-price/route.ts:3237:32)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.error
      Error fetching Bitcoin price: Error: Database error
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:173:69
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:37:23)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:18:53)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:12:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:8:12)
          at Object.<anonymous> (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:172:57)
          at Promise.then.completed (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/testWorker.js:106:12)
      28 |     });
      29 |   } catch (error) {
    > 30 |     console.error('Error fetching Bitcoin price:', error);
         |             ^
      31 |     
      32 |     return NextResponse.json({
      33 |       success: false,
      at error (src/app/api/bitcoin-price/route.ts:30:13)
      at step (src/app/api/bitcoin-price/route.ts:3562:19)
      at Object.throw (src/app/api/bitcoin-price/route.ts:3328:14)
      at rejected (src/app/api/bitcoin-price/route.ts:3237:32)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.error
      Error refreshing Bitcoin price: Error: API error
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:216:65
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:37:23)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:18:53)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:12:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:8:12)
          at Object.<anonymous> (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:214:50)
          at Promise.then.completed (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/testWorker.js:106:12)
      75 |     });
      76 |   } catch (error) {
    > 77 |     console.error('Error refreshing Bitcoin price:', error);
         |             ^
      78 |     
      79 |     return NextResponse.json({
      80 |       success: false,
      at error (src/app/api/bitcoin-price/route.ts:77:13)
      at step (src/app/api/bitcoin-price/route.ts:3562:19)
      at Object.throw (src/app/api/bitcoin-price/route.ts:3328:14)
      at rejected (src/app/api/bitcoin-price/route.ts:3237:32)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.error
      Error updating portfolio after price refresh: Error: Portfolio error
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:238:83
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:37:23)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:18:53)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:12:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:8:12)
          at Object.<anonymous> (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:227:72)
          at Promise.then.completed (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/testWorker.js:106:12)
      64 |       await BitcoinPriceService.calculateAndStorePortfolioSummary(priceData.price);
      65 |     } catch (portfolioError) {
    > 66 |       console.error('Error updating portfolio after price refresh:', portfolioError);
         |               ^
      67 |       portfolioUpdateMessage = 'but portfolio update failed';
      68 |     }
      69 |     
      at error (src/app/api/bitcoin-price/route.ts:66:15)
      at step (src/app/api/bitcoin-price/route.ts:3562:19)
      at Object.throw (src/app/api/bitcoin-price/route.ts:3328:14)
      at rejected (src/app/api/bitcoin-price/route.ts:3237:32)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.error
Error: ERROR] Error fetching today's OHLC data: Error: Database error
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:310:63
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:37:23)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:18:53)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:12:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:8:12)
          at Object.<anonymous> (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:309:40)
          at Promise.then.completed (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/testWorker.js:106:12)
      19 |     
      20 |   } catch (error) {
    > 21 |     console.error('[ERROR] Error fetching today\'s OHLC data:', error);
         |             ^
      22 |     
      23 |     return NextResponse.json({
      24 |       success: false,
      at error (src/app/api/bitcoin-price/today/route.ts:21:13)
      at step (src/app/api/bitcoin-price/today/route.ts:3026:19)
      at Object.throw (src/app/api/bitcoin-price/today/route.ts:2792:14)
      at rejected (src/app/api/bitcoin-price/today/route.ts:2701:32)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.error
Error: ERROR] Error fetching today's OHLC data: Error: Price service error
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:333:65
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:37:23)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:18:53)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:12:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:8:12)
          at Object.<anonymous> (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/bitcoin-price.test.ts:322:64)
          at Promise.then.completed (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/testWorker.js:106:12)
      19 |     
      20 |   } catch (error) {
    > 21 |     console.error('[ERROR] Error fetching today\'s OHLC data:', error);
         |             ^
      22 |     
      23 |     return NextResponse.json({
      24 |       success: false,
      at error (src/app/api/bitcoin-price/today/route.ts:21:13)
      at step (src/app/api/bitcoin-price/today/route.ts:3026:19)
      at Object.throw (src/app/api/bitcoin-price/today/route.ts:2792:14)
      at rejected (src/app/api/bitcoin-price/today/route.ts:2701:32)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [TEST] Test database disconnected
      at src/tests/setup.ts:42:13
PASS src/tests/api/exchange-rates.test.ts
  â— Console
    console.log
      ğŸ§ª Jest test environment configured
      at Object.<anonymous> (src/tests/jest.env.js:21:9)
    console.log
      [DATA] Database URL: file:./test.db
      at Object.<anonymous> (src/tests/jest.env.js:22:9)
    console.log
      [LOCK] NextAuth URL: http://localhost:3000
      at Object.<anonymous> (src/tests/jest.env.js:23:9)
    console.log
      [TEST] Test database connected
      at src/tests/setup.ts:35:11
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      [TOOL] Initializing test database...
      at log (src/tests/test-db.ts:44:13)
    console.log
      [OK] Test database initialized
      at log (src/tests/test-db.ts:193:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TEST] Test database disconnected
      at src/tests/setup.ts:42:13
FAIL src/tests/api/transactions.test.ts (7.857 s)
  â— Console
    console.log
      ğŸ§ª Jest test environment configured
      at Object.<anonymous> (src/tests/jest.env.js:21:9)
    console.log
      [DATA] Database URL: file:./test.db
      at Object.<anonymous> (src/tests/jest.env.js:22:9)
    console.log
      [LOCK] NextAuth URL: http://localhost:3000
      at Object.<anonymous> (src/tests/jest.env.js:23:9)
    console.log
      [TEST] Test database connected
      at src/tests/setup.ts:35:11
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      [TOOL] Initializing test database...
      at log (src/tests/test-db.ts:44:13)
    console.log
      [OK] Test database initialized
      at log (src/tests/test-db.ts:193:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      Response status: 200
      at src/tests/api/transactions.test.ts:98:15
    console.log
      Response data: {
        success: true,
        data: [
          {
            id: 1,
            type: 'BUY',
            btcAmount: 0.1,
            originalPricePerBtc: 50000,
            originalCurrency: 'USD',
            originalTotalAmount: 5000,
            fees: 0,
            feesCurrency: 'USD',
            transactionDate: '2024-01-15T00:00:00.000Z',
            notes: 'Test transaction',
            createdAt: '2025-09-15T16:24:38.200Z',
            updatedAt: '2025-09-15T16:24:38.200Z',
            transaction_date: '2024-01-15',
            btc_amount: 0.1,
            original_price_per_btc: 50000,
            original_currency: 'USD',
            original_total_amount: 5000,
            fees_currency: 'USD',
            created_at: '2025-09-15T16:24:38.200Z',
            updated_at: '2025-09-15T16:24:38.200Z',
            main_currency: 'USD',
            main_currency_price_per_btc: 52500,
            main_currency_total_amount: 5250,
            secondary_currency: 'EUR',
            secondary_currency_price_per_btc: 52500,
            secondary_currency_total_amount: 5250,
            secondary_currency_current_value: 5250,
            secondary_currency_pnl: 0,
            current_value_main: 5000,
            pnl_main: -250
          }
        ],
        summary: {
          total_transactions: 0,
          total_buy_transactions: 0,
          total_sell_transactions: 0,
          total_btc_bought: 0,
          total_btc_sold: 0,
          current_btc_holdings: 0,
          total_usd_invested: 0,
          total_usd_received: 0,
          total_fees_paid: 0,
          average_buy_price: 0,
          average_sell_price: 0,
          realized_pnl: 0,
          unrealized_pnl: 0,
          total_pnl: 0,
          roi_percentage: 0
        },
        message: 'Retrieved 1 transactions with EUR display values'
      }
      at src/tests/api/transactions.test.ts:99:15
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      prisma:error 
      Invalid `testDb.user.create()` invocation in
      /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/test-helpers.ts:31:34
      
        28 const password = testUserData.password || 'testpassword123'
        29 const hashedPassword = await bcrypt.hash(password, 10)
        30 
      â†’ 31 const user = await testDb.user.create(
      Unique constraint failed on the fields: (`email`)
      at Object.Yc (node_modules/@prisma/client/runtime/library.js:12:432)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      prisma:error 
      Invalid `prisma.bitcoinTransaction.update()` invocation in
      /home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/transactions/[id]/route.ts:127:64
      
        124 const originalTotalAmount = btcAmount * pricePerBtc;
        125 
        126 // Update transaction using Prisma - only store original data
      â†’ 127 const updatedTransaction = await prisma.bitcoinTransaction.update(
      An operation failed because it depends on one or more records that were required but not found. No record was found for an update.
      at Object.Yc (node_modules/@prisma/client/runtime/library.js:12:432)
    console.error
      Error updating transaction: PrismaClientKnownRequestError: 
      Invalid `prisma.bitcoinTransaction.update()` invocation in
      /home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/transactions/[id]/route.ts:127:64
      
        124 const originalTotalAmount = btcAmount * pricePerBtc;
        125 
        126 // Update transaction using Prisma - only store original data
      â†’ 127 const updatedTransaction = await prisma.bitcoinTransaction.update(
      An operation failed because it depends on one or more records that were required but not found. No record was found for an update.
          at Zn.handleRequestError (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/@prisma/client/runtime/library.js:121:7459)
          at Zn.handleAndLogRequestError (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/@prisma/client/runtime/library.js:121:6784)
          at Zn.request (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/@prisma/client/runtime/library.js:121:6491)
          at l (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/@prisma/client/runtime/library.js:130:9778) {
        code: 'P2025',
        meta: {
          modelName: 'BitcoinTransaction',
          cause: 'No record was found for an update.'
        },
        clientVersion: '6.10.1'
      }
      172 |     return NextResponse.json(response);
      173 |   } catch (error) {
    > 174 |     console.error('Error updating transaction:', error);
          |             ^
      175 |     return NextResponse.json({
      176 |       success: false,
      177 |       error: 'Failed to update transaction',
      at error (src/app/api/transactions/[id]/route.ts:174:13)
      at step (src/app/api/transactions/[id]/route.ts:5759:19)
      at Object.throw (src/app/api/transactions/[id]/route.ts:5525:14)
      at rejected (src/app/api/transactions/[id]/route.ts:5434:32)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      prisma:error 
      Invalid `prisma.bitcoinTransaction.delete()` invocation in
      /home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/transactions/[id]/route.ts:202:45
      
        199 
        200 // First check if transaction exists and delete it using Prisma
        201 try {
      â†’ 202   await prisma.bitcoinTransaction.delete(
      An operation failed because it depends on one or more records that were required but not found. No record was found for a delete.
      at Object.Yc (node_modules/@prisma/client/runtime/library.js:12:432)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.error
      Error creating transaction: Error: Invalid JSON
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/transactions.test.ts:665:35
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/transactions.test.ts:37:23)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/transactions.test.ts:18:53)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/transactions.test.ts:12:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/transactions.test.ts:8:12)
          at Object.json (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/transactions.test.ts:665:15)
          at json (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/transactions/route.ts:192:57)
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/transactions/route.ts:7699:19)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/transactions/route.ts:7465:14)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/transactions/route.ts:7397:39
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/transactions/route.ts:7346:10)
          at POST (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/transactions/route.ts:8345:10)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/transactions.test.ts:668:46
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/transactions.test.ts:37:23)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/transactions.test.ts:18:53)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/transactions.test.ts:12:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/transactions.test.ts:8:12)
          at Object.<anonymous> (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/transactions.test.ts:662:56)
          at Promise.then.completed (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/utils.js:298:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/utils.js:231:10)
          at _callCircusTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:316:40)
          at _runTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:252:3)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:126:9)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:121:9)
          at _runTestsForDescribeBlock (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:121:9)
          at run (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/run.js:71:3)
          at runAndTransformResultsToJestFormat (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
          at jestAdapter (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
          at runTestInternal (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/runTest.js:367:16)
          at runTest (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/runTest.js:444:34)
          at Object.worker (/home/runner/work/BTC-Tracker/BTC-Tracker/node_modules/jest-runner/build/testWorker.js:106:12)
      263 |     return NextResponse.json(response, { status: 201 });
      264 |   } catch (error) {
    > 265 |     console.error('Error creating transaction:', error);
          |             ^
      266 |     return NextResponse.json({
      267 |       success: false,
      268 |       error: 'Failed to create transaction',
      at error (src/app/api/transactions/route.ts:265:13)
      at step (src/app/api/transactions/route.ts:7699:19)
      at Object.throw (src/app/api/transactions/route.ts:7465:14)
      at rejected (src/app/api/transactions/route.ts:7374:32)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.error
      Error updating transaction: Error: Invalid JSON
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/transactions.test.ts:679:35
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/transactions.test.ts:37:23)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/transactions.test.ts:18:53)
          at /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/transactions.test.ts:12:71
          at new Promise (<anonymous>)
          at Object.<anonymous>.__awaiter (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/transactions.test.ts:8:12)
          at Object.json (/home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/api/transactions.test.ts:679:15)
          at json (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/transactions/[id]/route.ts:99:57)
          at step (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/transactions/[id]/route.ts:5759:19)
          at Object.next (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/transactions/[id]/route.ts:5525:14)
          at fulfilled (/home/runner/work/BTC-Tracker/BTC-Tracker/src/app/api/transactions/[id]/route.ts:5420:24)
      172 |     return NextResponse.json(response);
      173 |   } catch (error) {
    > 174 |     console.error('Error updating transaction:', error);
          |             ^
      175 |     return NextResponse.json({
      176 |       success: false,
      177 |       error: 'Failed to update transaction',
      at error (src/app/api/transactions/[id]/route.ts:174:13)
      at step (src/app/api/transactions/[id]/route.ts:5759:19)
      at Object.throw (src/app/api/transactions/[id]/route.ts:5525:14)
      at rejected (src/app/api/transactions/[id]/route.ts:5434:32)
    console.log
      [TEST] Test database disconnected
      at src/tests/setup.ts:42:13
  â— Transactions API â€º GET /api/transactions/[id] â€º should retrieve a specific transaction by ID
    PrismaClientKnownRequestError: 
    Invalid `testDb.user.create()` invocation in
    /home/runner/work/BTC-Tracker/BTC-Tracker/src/tests/test-helpers.ts:31:34
      28 const password = testUserData.password || 'testpassword123'
      29 const hashedPassword = await bcrypt.hash(password, 10)
      30 
    â†’ 31 const user = await testDb.user.create(
    Unique constraint failed on the fields: (`email`)
      at Zn.handleRequestError (node_modules/@prisma/client/runtime/library.js:121:7459)
      at Zn.handleAndLogRequestError (node_modules/@prisma/client/runtime/library.js:121:6784)
      at Zn.request (node_modules/@prisma/client/runtime/library.js:121:6491)
      at l (node_modules/@prisma/client/runtime/library.js:130:9778)
PASS src/tests/setup.test.ts
  â— Console
    console.log
      ğŸ§ª Jest test environment configured
      at Object.<anonymous> (src/tests/jest.env.js:21:9)
    console.log
      [DATA] Database URL: file:./test.db
      at Object.<anonymous> (src/tests/jest.env.js:22:9)
    console.log
      [LOCK] NextAuth URL: http://localhost:3000
      at Object.<anonymous> (src/tests/jest.env.js:23:9)
    console.log
      [TEST] Test database connected
      at src/tests/setup.ts:35:11
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      [TOOL] Initializing test database...
      at log (src/tests/test-db.ts:44:13)
    console.log
      [OK] Test database initialized
      at log (src/tests/test-db.ts:193:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [TEST] Test database disconnected
      at src/tests/setup.ts:42:13
FAIL src/tests/api/health.test.ts
  â— Console
    console.log
      ğŸ§ª Jest test environment configured
      at Object.<anonymous> (src/tests/jest.env.js:21:9)
    console.log
      [DATA] Database URL: file:./test.db
      at Object.<anonymous> (src/tests/jest.env.js:22:9)
    console.log
      [LOCK] NextAuth URL: http://localhost:3000
      at Object.<anonymous> (src/tests/jest.env.js:23:9)
    console.log
      [TEST] Test database connected
      at src/tests/setup.ts:35:11
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      [TOOL] Initializing test database...
      at log (src/tests/test-db.ts:44:13)
    console.log
      [OK] Test database initialized
      at log (src/tests/test-db.ts:193:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      [TEST] Test database disconnected
      at src/tests/setup.ts:42:13
  â— Health API â€º GET /api/health/db â€º should return correct counts for existing data
    expect(received).toBe(expected) // Object.is equality
    Expected: 1
    Received: 2
      157 |
      158 |       expect(response.status).toBe(200);
    > 159 |       expect(data.database.userCount).toBe(1);
          |                                       ^
      160 |       expect(data.database.settingsCount).toBe(2); // 1 from seed + 1 created here
      161 |     });
      162 |
      at src/tests/api/health.test.ts:159:39
      at step (src/tests/api/health.test.ts:33:23)
      at Object.next (src/tests/api/health.test.ts:14:53)
      at fulfilled (src/tests/api/health.test.ts:5:58)
PASS src/tests/basic.test.ts
  â— Console
    console.log
      ğŸ§ª Jest test environment configured
      at Object.<anonymous> (src/tests/jest.env.js:21:9)
    console.log
      [DATA] Database URL: file:./test.db
      at Object.<anonymous> (src/tests/jest.env.js:22:9)
    console.log
      [LOCK] NextAuth URL: http://localhost:3000
      at Object.<anonymous> (src/tests/jest.env.js:23:9)
    console.log
      [TEST] Test database connected
      at src/tests/setup.ts:35:11
    console.log
      [TEST] Test database disconnected
      at src/tests/setup.ts:42:13
PASS src/tests/api/auth.test.ts
  â— Console
    console.log
      ğŸ§ª Jest test environment configured
      at Object.<anonymous> (src/tests/jest.env.js:21:9)
    console.log
      [DATA] Database URL: file:./test.db
      at Object.<anonymous> (src/tests/jest.env.js:22:9)
    console.log
      [LOCK] NextAuth URL: http://localhost:3000
      at Object.<anonymous> (src/tests/jest.env.js:23:9)
    console.log
      [TEST] Test database connected
      at src/tests/setup.ts:35:11
    console.log
      [TOOL] Setting up test database...
      at log (src/tests/test-db.ts:385:13)
    console.log
      [TOOL] Initializing test database...
      at log (src/tests/test-db.ts:44:13)
    console.log
      [OK] Test database initialized
      at log (src/tests/test-db.ts:193:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [OK] Test database setup complete
      at log (src/tests/test-db.ts:396:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      ğŸ§¹ Test database cleaned
      at log (src/tests/test-db.ts:246:13)
    console.log
      ğŸŒ± Test database seeded
      at log (src/tests/test-db.ts:357:13)
    console.log
      [TEST] Test database disconnected
      at src/tests/setup.ts:42:13
-----------------------------------------|---------|----------|---------|---------|--------------------------------------------------------------------------------------------------------------------------------------------------------
File                                     | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                                                                                                      
-----------------------------------------|---------|----------|---------|---------|--------------------------------------------------------------------------------------------------------------------------------------------------------
All files                                |   29.51 |    19.98 |   21.25 |    29.2 |                                                                                                                                                        
 src                                     |       0 |        0 |       0 |       0 |                                                                                                                                                        
  instrumentation.ts                     |       0 |        0 |       0 |       0 | 7-20                                                                                                                                                   
  middleware.ts                          |       0 |        0 |       0 |       0 | 1-46                                                                                                                                                   
 src/app/api/auth/[...nextauth]          |       0 |      100 |     100 |       0 |                                                                                                                                                        
  route.ts                               |       0 |      100 |     100 |       0 | 1-6                                                                                                                                                    
 src/app/api/auth/check-user             |      75 |      100 |     100 |   72.72 |                                                                                                                                                        
  route.ts                               |      75 |      100 |     100 |   72.72 | 33-41                                                                                                                                                  
 src/app/api/auth/register               |    90.9 |      100 |     100 |   88.88 |                                                                                                                                                        
  route.ts                               |    90.9 |      100 |     100 |   88.88 | 64-65                                                                                                                                                  
 src/app/api/auth/token                  |   55.35 |    33.33 |      50 |    54.9 |                                                                                                                                                        
  route.ts                               |   55.35 |    33.33 |      50 |    54.9 | 45,58-63,94-95,105-165                                                                                                                                 
 src/app/api/bitcoin-price               |   96.29 |       75 |     100 |   95.83 |                                                                                                                                                        
  route.ts                               |   96.29 |       75 |     100 |   95.83 | 54                                                                                                                                                     
 src/app/api/bitcoin-price/today         |     100 |       50 |     100 |     100 |                                                                                                                                                        
  route.ts                               |     100 |       50 |     100 |     100 | 26                                                                                                                                                     
 src/app/api/custom-currencies           |     100 |      100 |     100 |     100 |                                                                                                                                                        
  route.ts                               |     100 |      100 |     100 |     100 |                                                                                                                                                        
 src/app/api/custom-currencies/[id]      |     100 |       95 |     100 |     100 |                                                                                                                                                        
  route.ts                               |     100 |       95 |     100 |     100 | 107                                                                                                                                                    
 src/app/api/exchange-rates              |     100 |      100 |     100 |     100 |                                                                                                                                                        
  route.ts                               |     100 |      100 |     100 |     100 |                                                                                                                                                        
 src/app/api/health                      |     100 |      100 |     100 |     100 |                                                                                                                                                        
  route.ts                               |     100 |      100 |     100 |     100 |                                                                                                                                                        
 src/app/api/health/db                   |     100 |       75 |     100 |     100 |                                                                                                                                                        
  route.ts                               |     100 |       75 |     100 |     100 | 14-18                                                                                                                                                  
 src/app/api/historical-data             |    97.5 |    81.81 |     100 |   97.22 |                                                                                                                                                        
  route.ts                               |    97.5 |    81.81 |     100 |   97.22 | 79                                                                                                                                                     
 src/app/api/historical-data/fetch       |   90.42 |    58.62 |     100 |   89.02 |                                                                                                                                                        
  route.ts                               |   90.42 |    58.62 |     100 |   89.02 | 26-27,34-35,37-40,67                                                                                                                                   
 src/app/api/historical-data/status      |   96.55 |    57.14 |     100 |     100 |                                                                                                                                                        
  route.ts                               |   96.55 |    57.14 |     100 |     100 | 75-90                                                                                                                                                  
 src/app/api/historical-data/update      |     100 |       50 |     100 |     100 |                                                                                                                                                        
  route.ts                               |     100 |       50 |     100 |     100 | 19-45                                                                                                                                                  
 src/app/api/settings                    |   93.65 |    82.85 |     100 |   92.15 |                                                                                                                                                        
  route.ts                               |   93.65 |    82.85 |     100 |   92.15 | 19-20,42-43                                                                                                                                            
 src/app/api/startup                     |       0 |        0 |       0 |       0 |                                                                                                                                                        
  route.ts                               |       0 |        0 |       0 |       0 | 1-40                                                                                                                                                   
 src/app/api/system/scheduler            |       0 |        0 |       0 |       0 |                                                                                                                                                        
  route.ts                               |       0 |        0 |       0 |       0 | 1-76                                                                                                                                                   
 src/app/api/system/status               |       0 |        0 |       0 |       0 |                                                                                                                                                        
  route.ts                               |       0 |        0 |       0 |       0 | 1-91                                                                                                                                                   
 src/app/api/transactions                |   87.32 |    82.45 |   92.85 |   86.84 |                                                                                                                                                        
  route.ts                               |   87.32 |    82.45 |   92.85 |   86.84 | 24-25,29-30,36-53,180-181,253,347                                                                                                                      
 src/app/api/transactions/[id]           |   76.92 |    65.51 |      75 |   77.19 |                                                                                                                                                        
  route.ts                               |   76.92 |    65.51 |      75 |   77.19 | 8-18,65-74,116,147,214,221,232-233                                                                                                                     
 src/app/api/transactions/export         |       0 |        0 |       0 |       0 |                                                                                                                                                        
  route.ts                               |       0 |        0 |       0 |       0 | 1-139                                                                                                                                                  
 src/app/api/transactions/import         |       0 |        0 |       0 |       0 |                                                                                                                                                        
  route.ts                               |       0 |        0 |       0 |       0 | 6-164                                                                                                                                                  
 src/app/api/transactions/import/parsers |       0 |        0 |       0 |       0 |                                                                                                                                                        
  base.ts                                |       0 |        0 |       0 |       0 | 7-94                                                                                                                                                   
  binance.ts                             |       0 |        0 |       0 |       0 | 5-189                                                                                                                                                  
  coinbase.ts                            |       0 |        0 |       0 |       0 | 5-73                                                                                                                                                   
  index.ts                               |       0 |        0 |       0 |       0 | 6-172                                                                                                                                                  
  kraken.ts                              |       0 |        0 |       0 |       0 | 5-76                                                                                                                                                   
  legacy.ts                              |       0 |        0 |       0 |       0 | 5-116                                                                                                                                                  
  standard.ts                            |       0 |        0 |       0 |       0 | 5-130                                                                                                                                                  
  strike.ts                              |       0 |        0 |       0 |       0 | 5-102                                                                                                                                                  
 src/app/api/user                        |       0 |        0 |       0 |       0 |                                                                                                                                                        
  route.ts                               |       0 |        0 |       0 |       0 | 1-169                                                                                                                                                  
 src/app/api/user/avatar                 |       0 |        0 |       0 |       0 |                                                                                                                                                        
  route.ts                               |       0 |        0 |       0 |       0 | 1-124                                                                                                                                                  
 src/lib                                 |   13.91 |     4.14 |    9.17 |    14.8 |                                                                                                                                                        
  app-initialization.ts                  |   16.66 |        0 |    8.33 |   16.27 | 25-52,61-76,85-151,160-174,183,194-206,213-219,228-260,268-300,310-316                                                                                 
  auth-helpers.ts                        |       0 |        0 |       0 |       0 | 2-125                                                                                                                                                  
  auth.ts                                |     7.4 |        0 |       0 |    8.51 | 16-126                                                                                                                                                 
  bitcoin-price-client.ts                |       0 |        0 |       0 |       0 | 11-91                                                                                                                                                  
  bitcoin-price-service.ts               |   10.63 |        0 |    2.85 |   12.35 | 78-106,116-152,162-179,187-254,263-279,288-301,310-323,331-332,341-358,367-378,387-421,431-570,608-634,643-685,696-776,785-804,813-822,831-847,855-882 
  currency-symbol-service.ts             |       0 |        0 |       0 |       0 | 1-69                                                                                                                                                   
  custom-currency-service.ts             |   15.06 |        0 |      10 |   15.87 | 25-41,51-121,130-167,176-185,194-199,208-226,235-256                                                                                                   
  database.ts                            |       0 |        0 |       0 |       0 | 1-285                                                                                                                                                  
  exchange-rate-service.ts               |   12.06 |        0 |    5.88 |    13.6 | 35-50,59-80,89-146,154-233,244-279,289-320,328-353,363-385,394-414,424-437,447-462,470                                                                 
  historical-data-service.ts             |   12.19 |        0 |    4.76 |   13.19 | 12-44,53-57,65-72,82-100,110-149,158-177,186-212,223-236,245-275,284-292,301-322,334-351,359-364                                                       
  price-scheduler.ts                     |   14.65 |        0 |      10 |   15.53 | 19-83,90-106,114-180,190-197,206-225,233                                                                                                               
  prisma.ts                              |   27.58 |    53.33 |   16.66 |   29.16 | 24,29-54                                                                                                                                               
  settings-service.ts                    |   80.64 |    76.47 |   76.47 |   82.27 | 49-51,58-59,91-92,180-181,185-186,190-191,195-196                                                                                                      
  test-utils.ts                          |       0 |        0 |       0 |       0 | 10-310                                                                                                                                                 
  theme.ts                               |       0 |        0 |       0 |       0 | 5-392                                                                                                                                                  
  types.ts                               |     100 |      100 |     100 |     100 |                                                                                                                                                        
  yahoo-finance-service.ts               |   12.28 |        0 |    9.09 |   13.54 | 14-24,34-68,78-116,124-147,155-201,211-227,236-263,272-280                                                                                             
 src/tests                               |   58.54 |    38.46 |   47.82 |   56.49 |                                                                                                                                                        
  test-db.ts                             |      50 |    32.14 |    62.5 |   49.53 | 31,54-57,195-196,248-249,259-332,359-360,368-376,398-399,407-409                                                                                       
  test-helpers.ts                        |   77.04 |    54.54 |      40 |   72.34 | 134,140-152,163-167                                                                                                                                    
-----------------------------------------|---------|----------|---------|---------|--------------------------------------------------------------------------------------------------------------------------------------------------------
Test Suites: 2 failed, 8 passed, 10 total
Tests:       2 failed, 2 skipped, 193 passed, 197 total
Snapshots:   0 total